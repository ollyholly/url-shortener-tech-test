<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Awesome URL Shortener</title>
  </head>

  <body>
    <form name="urlForm" method="post" action="" id="shortener">
      <input type="text" name="url" />
      <input type="submit" />
    </form>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- <script src="./lib/app.js"></script> -->
    <script>
      $(document).ready(function() {
        var form = $("#shortener");

        form.submit(function(ev) {
          ev.preventDefault();

          var formData = form.serialize();
          console.log(form);
          console.log(formData);
          axios({
            method: "post",
            url: "http://localhost:4000/",
            data: {
              url: "google.com"
            },
            headers: "Access-Control-Allow-Origin: *"
          })
            .then(res => {
              //We don't have to parse the JSON!
              console.log(res.data);
            })
            .catch(err => {
              console.log("IN CATCH CALLBACK!!!");
              console.log(err);
            });

          // $.ajax({
          //   method: "POST",
          //   url: "localhost:4000/",
          //   data: formData
          // }).done(function(data) {
          //   alert(data);
          // });
        });
      }); // end .ready()
    </script>
  </body>
</html>
